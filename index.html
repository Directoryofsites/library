<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lumen Logos</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
<link rel="stylesheet" href="css/style.css">

</head>
<body>
    <!-- Header -->
    <header>
               
        <div class="container">
            <div class="main-header">
                <div class="logo">
                    <img src="images/logo1.png" alt="Lumen Logos">
                    <div class="logo-text">
                        <h1>La luz del Verbo</h1>
                        <p>Revelaci√≥n que ilumina el alma</p>
                    </div>
                </div>
                <button class="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </button>
                <nav>
                    <ul>
                        <li><a href="index.html">Principal</a></li>
                        <li><a href="about.html">Acerca de</a>
                            <ul>
                                <li><a href="mission.html">Nuestra Misi√≥n</a></li>
                                <li><a href="history.html">Historia</a></li>
                                <li><a href="statement-of-faith.html">Declaraci√≥n de F√©</a></li>
                            </ul>
                        </li>
                        <li><a href="programs.html">CONOCIMIENTO</a>
                            <ul>
                                <li><a href="master-of-divinity.html">Estudios</a></li>
                                <li><a href="master-of-arts.html">Consultas</a></li>
                                <li><a href="doctor-of-ministry.html"></a></li>
                                <li><a href="certificate-programs.html"></a></li>
                            </ul>
                        </li>
                        <li><a href="faculty.html">Enlaces</a></li>
                        <li><a href="admissions.html">Titulos</a>
                            <ul>
                                <li><a href="requirements.html">Requirements</a></li>
                                <li><a href="tuition.html">Tuition & Fees</a></li>
                                <li><a href="financial-aid.html">Financial Aid</a></li>
                                <li><a href="apply.html">Apply Now</a></li>
                            </ul>
                        </li>
                        <li><a href="resources.html">Buscar</a>
                            <ul>
                                <li><a href="library.html">Library</a></li>
                                <li><a href="blog.html">Blog</a></li>
                                <li><a href="events.html">Events</a></li>
                            </ul>
                        </li>
                        <li><a href="contact.html">Contacto</a></li>
                        <li><a href="#" id="login-btn">Logearse</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" style="background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('images/1.png'); background-size: cover; background-position: center;">
    <div class="container">
        <h2>Biblioteca Digital Teol√≥gica</h2>
        <p>Conocimiento B√≠blico en comunidad: comparte, estudia y profundiza</p>

        <div class="hero-buttons">
    <a href="alimentar.html" class="btn btn-secondary">Agregar</a>
    <a href="consultar.html" class="btn btn-secondary">Consultar</a>
</div>

    </div>
</section>

    <!-- Features Section -->
    <section class="features">
        <div class="container">
            <div class="features-grid">
                <div class="feature-box">
                    <div class="feature-icon">
                        
                        <img src="images/icono1.png" alt="Flexible Learning" class="feature-image">

                    </div>
                    <h3 class="feature-title">üïØ L√°mpara a mis pies</h3>
                    <p class="feature-text">"L√°mpara es a mis pies tu palabra, y lumbrera a mi camino." (Salmo 119:105)
En un mundo de tinieblas morales y confusi√≥n espiritual, la Palabra de Dios resplandece como una antorcha viva. Aqu√≠ encontrar√°s verdades eternas que iluminan el sendero del alma, corrigen el coraz√≥n y conducen al peregrino hacia el puerto seguro de la voluntad de Dios. Lumen Logos es ese faro donde cada ense√±anza apunta al resplandor de la verdad revelada.</p>
                    <a href="online-learning.html" class="btn btn-outline">Learn More</a>
                </div>
                <div class="feature-box">
                    <div class="feature-icon">

                        <img src="images/icono2.png" alt="Flexible Learning" class="feature-image">

                    </div>
                    <h3 class="feature-title">‚ú® El Verbo eterno y encarnado</h3>
                    <p class="feature-text">"En el principio era el Verbo, y el Verbo era con Dios, y el Verbo era Dios." (Juan 1:1)
Cristo, el Logos, no es solo Palabra pronunciada, sino Palabra viva, encarnada y glorificada. A trav√©s de √âl, toda revelaci√≥n adquiere forma, todo mensaje encuentra sentido, y todo coraz√≥n puede ser transformado. En este sitio exaltamos al Hijo eterno como la expresi√≥n perfecta del Padre, la Luz verdadera que alumbra a todo hombre.</p>
                    <a href="accreditation.html" class="btn btn-outline">Learn More</a>
                </div>
                <div class="feature-box">
                    <div class="feature-icon">

                        <img src="images/icono3.png" alt="Flexible Learning" class="feature-image">

                    </div>
                    <h3 class="feature-title">üì£ La Voz de la Iglesia</h3>
                    <p class="feature-text">"Predica la palabra; insiste a tiempo y fuera de tiempo." (2 Timoteo 4:2)
La Iglesia ha sido comisionada como heraldo del Verbo. No somos due√±os del mensaje, sino portadores fieles de una Verdad que no puede callarse. Aqu√≠ fortalecemos a quienes proclaman, ense√±an y viven el Evangelio, edificando una comunidad que no solo escucha, sino tambi√©n anuncia con denuedo la gloria de Cristo.</p>
                    <a href="community.html" class="btn btn-outline">Learn More</a>
                </div>
                <div class="feature-box">
                    <div class="feature-icon">

                        <img src="images/icono4.png" alt="Flexible Learning" class="feature-image">

                    </div>
                    <h3 class="feature-title">‚ù§Ô∏è El Hambre del Coraz√≥n Humano</h3

                        <p class="feature-text">"No s√≥lo de pan vivir√° el hombre, sino de toda palabra que sale de la boca de Dios." (Mateo 4:4)
Cada alma anhela sentido, direcci√≥n, redenci√≥n. Solo la Palabra viva puede satisfacer ese clamor profundo. Este espacio es para el sediento, para el que busca luz en medio del quebranto, para quien anhela vida y verdad. Aqu√≠ hallar√°s recursos que alimentan el esp√≠ritu y renuevan el alma mediante el poder del Verbo divino.</p>
                    
                    <a href="community.html" class="btn btn-outline">Learn More</a>

                    </div>
            </div>
        </div>
    </section>
    
    <!-- Agrega el resto de las secciones de tu sitio web aqu√≠ -->

  <!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script type="module">
    import { supabase } from './js/supabase-config.js';
    window.supabase = supabase;
</script>
<script src="js/data-manager.js"></script>
<script src="js/scripts.js"></script>

<!-- Modal de Login -->
<div id="login-modal" class="login-modal">
    <div class="login-content">
        <span class="close-modal">&times;</span>
        <h2>Acceso Administrativo</h2>
        <div class="login-form">
            <input type="password" id="admin-password" placeholder="Contrase√±a">
            <button id="submit-login">Ingresar</button>
        </div>
        <div id="login-error" class="login-error"></div>
    </div>
</div>

<style>
/* Estilos Modal Login */
.login-modal {
    display: none;
    position: fixed;
    z-index: 1001;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.5);
}

.login-content {
    background-color: #fefefe;
    margin: 15% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 300px;
    border-radius: 5px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.close-modal {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
}

.close-modal:hover {
    color: black;
}

.login-form {
    margin-top: 20px;
}

.login-form input {
    width: 100%;
    padding: 10px;
    margin-bottom: 15px;
    border: 1px solid #ddd;
    border-radius: 4px;
}

.login-form button {
    width: 100%;
    padding: 10px;
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

.login-form button:hover {
    background-color: var(--secondary-color);
    color: var(--primary-color);
}

.login-error {
    color: #d9534f;
    margin-top: 10px;
    text-align: center;
}
</style>

<script>
// Manejo de autenticaci√≥n
document.addEventListener('DOMContentLoaded', function() {
    // Verificar si el usuario ya est√° logueado 
    checkLoginStatus();
    
    // Manejar click en bot√≥n de login
    document.getElementById('login-btn').addEventListener('click', function(e) {
        e.preventDefault();
        document.getElementById('login-modal').style.display = 'block';
    });
    
    // Cerrar modal al hacer clic en X
    document.querySelector('.close-modal').addEventListener('click', function() {
        document.getElementById('login-modal').style.display = 'none';
    });
    
    // Cerrar modal al hacer clic fuera del contenido
    window.addEventListener('click', function(e) {
        if (e.target == document.getElementById('login-modal')) {
            document.getElementById('login-modal').style.display = 'none';
        }
    });
    
    // Manejar submit del formulario de login
    document.getElementById('submit-login').addEventListener('click', handleLogin);
    
    // Tambi√©n permitir login con la tecla Enter
    document.getElementById('admin-password').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            handleLogin();
        }
    });
});

// Verificar estado de login
function checkLoginStatus() {
    const isLoggedIn = localStorage.getItem('isAdmin') === 'true';
    
    // Actualizar texto del bot√≥n seg√∫n estado
    document.getElementById('login-btn').textContent = isLoggedIn ? 'Cerrar Sesi√≥n' : 'Logearse';
    
    // Si est√° logueado, cambiar comportamiento del bot√≥n para cerrar sesi√≥n
    if (isLoggedIn) {
        document.getElementById('login-btn').removeEventListener('click', null);
        document.getElementById('login-btn').addEventListener('click', function(e) {
            e.preventDefault();
            logout();
        });
        
        // Mostrar bot√≥n de "Agregar" 
        const agregarBtn = document.querySelector('.hero-buttons a[href="alimentar.html"]');
        if (agregarBtn) agregarBtn.style.display = 'inline-block';
    } else {
        // Ocultar bot√≥n de "Agregar"
        const agregarBtn = document.querySelector('.hero-buttons a[href="alimentar.html"]');
        if (agregarBtn) agregarBtn.style.display = 'none';
    }
}

// Manejar intento de login
async function handleLogin() {
    const password = document.getElementById('admin-password').value;
    const errorElement = document.getElementById('login-error');
    
    try {
        // Primero, generamos el hash de la contrase√±a
        const hashedPassword = await hashPassword(password);
        
        // Luego verificamos con la funci√≥n RPC
        const { data, error } = await supabase.rpc('verify_admin_password', {
            pass: hashedPassword
        });
        
        if (error) {
            throw error;
        }
        
        if (data === true) {
            // Contrase√±a correcta - guardar estado
            localStorage.setItem('isAdmin', 'true');
            
            // Cerrar modal
            document.getElementById('login-modal').style.display = 'none';
            
            // Limpiar campo de contrase√±a
            document.getElementById('admin-password').value = '';
            
            // Actualizar UI
            errorElement.textContent = '';
            checkLoginStatus();
        } else {
            errorElement.textContent = 'Contrase√±a incorrecta';
        }
    } catch (error) {
        console.error('Error al verificar credenciales:', error.message);
        errorElement.textContent = 'Error al verificar. Intente nuevamente.';
    }
}

// Funci√≥n para hashear la contrase√±a
async function hashPassword(password) {
    const encoder = new TextEncoder();
    const data = encoder.encode(password);
    const hashBuffer = await crypto.subtle.digest('SHA-256', data);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
}

// Cerrar sesi√≥n
function logout() {
    localStorage.removeItem('isAdmin');
    checkLoginStatus();
}

// Ocultar bot√≥n "Agregar" si no est√° logueado al cargar la p√°gina
window.addEventListener('DOMContentLoaded', function() {
    const isLoggedIn = localStorage.getItem('isAdmin') === 'true';
    const agregarBtn = document.querySelector('.hero-buttons a[href="alimentar.html"]');
    if (agregarBtn && !isLoggedIn) {
        agregarBtn.style.display = 'none';
    }
});
</script>

</body>
</html>
